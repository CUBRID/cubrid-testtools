#!/usr/bin/expect
set timeout 1000
set SOURCE [lindex $argv 0]
set TARGET [lindex $argv 1]
set PASSWORD [lindex $argv 2]

spawn scp -r $SOURCE $TARGET
expect {
"(yes/no)?" {send "yes\r";exp_continue}
"password:" {send "$PASSWORD\r"}
}
sleep 2
expect eof
