#!/usr/bin/expect
#get OS, hostname and $CUBRID information from server
#argv 0 - server IP
#argv 1 - password

set HOST [lindex $argv 0]
set PASSWORD [lindex $argv 1]

spawn ssh $HOST
expect {
"(yes/no)?" {send "yes\r";exp_continue}
"password:" {send "$PASSWORD\r"}
}
expect "$"
send "cubrid heartbeat start\r"
set timeout 15
expect "$"
send "cubrid heartbeat status\r"
send "exit\r"
expect eof
